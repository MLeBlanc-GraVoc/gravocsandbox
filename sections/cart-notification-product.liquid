{%- if cart != empty -%}
  {%- for item in cart.items -%}
    <div id="cart-notification-product-{{ item.key }}" class="cart-item">
      <div class="cart-notification-product mt-05 p-2 border border-radius-panel color-{{ settings.cart_drawer_color_scheme }} gradient">
        {%- if item.image -%}
          <div class="cart-notification-product__image{% if settings.card_image_replace_background %} mix-blend-multiply{% endif %}">
            <img
              src="{{ item.image | image_url: width: 140 }}"
              alt="{{ item.image.alt | escape }}"
              width="70"
              height="{{ 70 | divided_by: item.image.aspect_ratio | ceil }}"
              loading="lazy"
              fetchpriority="low"
            >
          </div>
        {%- endif -%}

        <div>
          <h3 class="cart-notification-product__name text-body t3">{{ item.product.title | escape }}</h3>
          <dl class="opacity-80">
            {%- unless item.product.has_only_default_variant -%}
              {%- for option in item.options_with_values -%}
                <div class="product-option">
                  <dt>{{ option.name }}:</dt>
                  <dd>{{ option.value }}</dd>
                </div>
              {%- endfor -%}
            {%- endunless -%}
            {%- for property in item.properties -%}
              {%- assign property_first_char = property.first | slice: 0 -%}
              {%- if property.last != blank and property_first_char != '_' -%}
                <div class="product-option">
                  <dt>{{ property.first }}:</dt>
                  <dd>
                    {%- if property.last contains '/uploads/' -%}
                      <a href="{{ property.last }}" class="link" target="_blank">
                        {{ property.last | split: '/' | last }}
                      </a>
                    {%- else -%}
                      {{ property.last }}
                    {%- endif -%}
                  </dd>
                </div>
              {%- endif -%}
            {%- endfor -%}
          </dl>
          {%- if item.selling_plan_allocation != null -%}
            <p class="product-option">{{ item.selling_plan_allocation.selling_plan.name }}</p>
          {%- endif -%}
        </div>
      </div>

      {%- if settings.cart_related_show and settings.cart_related_show_in_popup -%}
        <div class="cart__recommendations">
          {%- render 'mini-card-list',
              mode: 'related',
              section_id: 'cart-drawer',
              layout: settings.cart_related_layout,
              make_collapsible_row: false,
              enable_quick_add: settings.enable_quick_add,
              product_list_limit: settings.cart_related_limit,
              block_heading: settings.cart_related_heading,
              products_per_page: 1,
              color_scheme: settings.cart_related_color_scheme,
              line_color_scheme: settings.cart_drawer_background_color_scheme
          -%}
        </div>
      {%- endif -%}
    </div>
  {%- endfor -%}
{%- endif -%}
